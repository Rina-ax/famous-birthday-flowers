<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TikTok Glow Flowers</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>

<style>
body {
  margin: 0;
  background: black;
  overflow: hidden;
}
canvas {
  display: block;
  margin: auto;
}
</style>
</head>

<body>
<script>
let flowers = [];
let particles = [];
let timerStart;
let countdown = 10;

function setup() {
  createCanvas(400, 700);
  angleMode(RADIANS);
  timerStart = millis();

  // background sparkles
  for (let i = 0; i < 120; i++) {
    particles.push({
      x: random(width),
      y: random(height),
      a: random(40, 120),
      s: random(1, 2)
    });
  }

  // flowers
  for (let i = -1; i <= 1; i++) {
    flowers.push(new Flower(i * 45, random(0, TWO_PI)));
  }
}

function draw() {
  background(6, 10, 14);

  drawParticles();

  let elapsed = floor((millis() - timerStart) / 1000);
  countdown = max(10 - elapsed, 0);

  if (countdown > 0) {
    drawCountdown();
  } else {
    translate(width / 2, height - 90);
    drawGrass();
    for (let f of flowers) f.update();
  }
}

/* ---------- PARTICLES ---------- */
function drawParticles() {
  noStroke();
  for (let p of particles) {
    fill(180, 220, 200, p.a);
    circle(p.x, p.y, p.s);
  }
}

/* ---------- COUNTDOWN ---------- */
function drawCountdown() {
  textAlign(CENTER, CENTER);
  textSize(72);
  fill(200, 200, 200, 180);
  drawingContext.shadowBlur = 25;
  drawingContext.shadowColor = "rgba(200,200,200,0.6)";
  text(countdown, width / 2, height / 2);
}

/* ---------- FLOWER CLASS ---------- */
class Flower {
  constructor(x, phase) {
    this.x = x;
    this.phase = phase;
    this.grow = 0;
    this.bloom = 0;
  }

  update() {
    push();
    translate(this.x, 0);

    let sway = sin(frameCount * 0.01 + this.phase) * 0.15;
    rotate(sway);

    this.grow = min(this.grow + 0.7, 230);
    stroke(110, 230, 160);
    strokeWeight(3);
    noFill();
    beginShape();
    curveVertex(0, 0);
    curveVertex(0, 0);
    curveVertex(4, -this.grow / 2);
    curveVertex(0, -this.grow);
    curveVertex(0, -this.grow);
    endShape();

    if (this.grow > 200) {
      this.bloom = min(this.bloom + 0.4, 28);
      drawGlowFlower(0, -this.grow, this.bloom);
    }
    pop();
  }
}

/* ---------- FLOWER DRAW ---------- */
function drawGlowFlower(x, y, s) {
  push();
  translate(x, y);

  for (let g = 20; g > 0; g--) {
    fill(255, 130, 160, 6);
    circle(0, 0, s * g * 0.15);
  }

  for (let i = 0; i < 5; i++) {
    let a = TWO_PI / 5 * i;
    let px = cos(a) * s;
    let py = sin(a) * s * 0.7;
    fill(255, 150, 180, 200);
    ellipse(px, py, s * 1.1, s * 0.6);
  }

  fill(255, 230, 180);
  circle(0, 0, s * 0.6);

  pop();
}

/* ---------- GRASS ---------- */
function drawGrass() {
  stroke(90, 200, 140);
  strokeWeight(2);
  for (let i = -90; i <= 90; i += 10) {
    let h = random(40, 80);
    line(i, 0, i + random(-6, 6), -h);
  }
}
</script>
</body>
</html>
