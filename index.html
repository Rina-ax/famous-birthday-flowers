<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Birthday Snowdrops</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: black;
}
canvas { display: block; }
#countdown {
  position: absolute;
  top: 40%;
  width: 100%;
  text-align: center;
  font-size: 64px;
  color: #ccc;
  font-family: cursive;
}
#letter {
  position: absolute;
  top: 12%;
  width: 60%;
  left: 20%;
  text-align: center;
  color: white;
  font-size: 26px;
  font-family: cursive;
  letter-spacing: 2px;
  white-space: pre-wrap;
}
</style>
</head>
<body>
<div id="countdown"></div>
<div id="letter"></div>
<canvas id="canvas"></canvas>

<script>
console.log("Script started");

const LETTER_TEXT = `Happy birthday to the one man I'll always love.
I hope this year brings you warmth, laughter,
and many beautiful moments, spent together with people
beloved to you. I'll forever cherish the day you
were born and I'm equally grateful to have you.
Thank you, birthday boy, for being my sweet place.`;

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const countdownEl = document.getElementById("countdown");
const letterEl = document.getElementById("letter");

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

// ===== COUNTDOWN =====
let count = 10;
countdownEl.textContent = count;
const countdownTimer = setInterval(() => {
  count--;
  countdownEl.textContent = count;
  if (count <= 0) {
    clearInterval(countdownTimer);
    countdownEl.style.display = "none";
    startAnimation();
  }
}, 1000);

// ===== LETTER TYPING EFFECT =====
function typeLetter(text, el, speed = 80) {
  let i = 0;
  el.textContent = "";
  function step() {
    if (i < text.length) {
      el.textContent += text[i];
      i++;
      setTimeout(step, speed);
    }
  }
  step();
}

// ===== SNOWDROPS =====
let growth = 0;
let sway = 0;

function drawStem(x0, y0, x1, y1) {
  ctx.strokeStyle = "#2f6f5f";
  ctx.lineWidth = 4;
  ctx.lineCap = "round";
  ctx.beginPath();
  ctx.moveTo(x0, y0);
  ctx.quadraticCurveTo((x0 + x1) / 2 + Math.sin(sway) * 6, y0 - 40, x1, y1);
  ctx.stroke();
}

function drawSnowdrop(x, y, s) {
  ctx.save();
  ctx.translate(x, y);
  ctx.scale(s, s);
  ctx.shadowColor = "white";
  ctx.shadowBlur = 12;
  for (let i = 0; i < 5; i++) {
    ctx.rotate((Math.PI * 2) / 5);
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.bezierCurveTo(-6, 14, -4, 28, 0, 36);
    ctx.bezierCurveTo(4, 28, 6, 14, 0, 0);
    ctx.fillStyle = "white";
    ctx.fill();
  }
  ctx.restore();
}

function drawBouquet() {
  const cx = canvas.width / 2;
  const baseY = canvas.height * 0.8;
  const rootY = baseY + 40;

  const stems = [-40, -20, 0, 20, 40];
  stems.forEach((dx, i) => {
    const tipX = cx + dx;
    const tipY = baseY - (140 + i * 10) * growth;
    drawStem(cx, rootY, tipX, tipY);
    drawSnowdrop(tipX, tipY, 0.9);
  });
}

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  sway += 0.02;
  if (growth < 1) growth += 0.004;
  drawBouquet();
  requestAnimationFrame(animate);
}

function startAnimation() {
  animate();
  setTimeout(() => typeLetter(LETTER_TEXT, letterEl), 2000);
}
</script>
</body>
</html>
